<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StudyFocus Pro - ULTIMATE FOCUS</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; min-height: 100vh; overflow-x: hidden;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .glass-card { 
            background: rgba(255,255,255,0.1); backdrop-filter: blur(20px); 
            border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); 
            padding: 30px; margin-bottom: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.3); 
        }
        .hidden { display: none !important; }
        .screen { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; text-align: center; position: relative; }
        .input-group input, .input-group textarea, .input-group select { 
            width: 100%; max-width: 500px; padding: 18px; border: none; border-radius: 15px; 
            background: rgba(255,255,255,0.2); color: white; font-size: 16px; margin-bottom: 20px; 
            font-family: inherit;
        }
        .input-group input::placeholder, .input-group textarea::placeholder { color: rgba(255,255,255,0.7); }
        .btn { padding: 15px 25px; border: none; border-radius: 15px; font-size: 16px; font-weight: 600; cursor: pointer; margin: 10px; transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.3); }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: #4facfe; color: white; width: 100%; max-width: 300px; }
        .btn-success { background: #00f2fe; color: #2c3e50; width: 100%; max-width: 300px; }
        .btn-warning { background: #ff6b6b; color: white; }
        .btn-secondary { background: #f39c12; color: white; }
        .btn-info { background: #3498db; color: white; }
        .back-btn { position: absolute; top: 20px; left: 20px; width: auto; padding: 12px 24px; }
        .settings-btn, .theme-toggle { position: fixed; top: 20px; width: 60px; height: 60px; border-radius: 50%; background: rgba(255,255,255,0.2); color: white; border: none; font-size: 1.5em; cursor: pointer; z-index: 1000; backdrop-filter: blur(10px); }
        .settings-btn { left: 20px; }
        .theme-toggle { right: 20px; }
        .notification { position: fixed; top: 30px; left: 50%; transform: translateX(-50%); min-width: 400px; max-width: 90vw; padding: 25px; border-radius: 20px; font-size: 20px; font-weight: 900; z-index: 9999; box-shadow: 0 20px 50px rgba(255,0,0,0.8); border: 4px solid #ff0000; animation: bounce 0.5s infinite alternate; background: linear-gradient(135deg, #ff0000, #ff4444); color: white; text-align: center; }
        @keyframes bounce { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-10px); } }
        .speech-bubble { position: fixed; top: 100px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #00f2fe, #4facfe); padding: 25px 35px; border-radius: 25px; font-size: 22px; font-weight: 700; z-index: 9998; box-shadow: 0 20px 50px rgba(0,242,254,0.4); max-width: 90vw; }
        .timer-display { font-size: clamp(4em, 15vw, 8em); font-weight: 800; margin: 30px 0; background: linear-gradient(45deg, #00f2fe, #4facfe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin: 25px 0; }
        .stat-card { text-align: center; padding: 25px; background: rgba(255,255,255,0.1); border-radius: 15px; }
        .streak-flame { font-size: 4em; animation: flicker 2s infinite; }
        @keyframes flicker { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .progress-ring { width: clamp(200px, 40vw, 300px); height: clamp(200px, 40vw, 300px); margin: 30px auto; }
        .notes-reading { background: rgba(0,255,255,0.15); border: 2px solid #00f2fe; padding: 25px; border-radius: 20px; margin: 20px 0; max-height: 350px; overflow-y: auto; font-size: 16px; line-height: 1.7; text-align: left; white-space: pre-wrap; }
    </style>
</head>
<body>
    <button class="settings-btn" onclick="showSettings()" title="Settings">‚öôÔ∏è</button>
    <button class="theme-toggle" onclick="toggleTheme()">üåô</button>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="screen">
        <div class="glass-card" style="max-width: 450px;">
            <h1 style="font-size: clamp(2.5em, 8vw, 4em); margin-bottom: 20px;">üéì StudyFocus Pro</h1>
            <p style="font-size: 1.3em; margin-bottom: 30px;">ULTIMATE Focus Timer</p>
            <div class="input-group">
                <input type="text" id="username" placeholder="Enter your name" autocomplete="name">
            </div>
            <button class="btn btn-primary" onclick="login()">üöÄ START STUDYING</button>
        </div>
    </div>

    <!-- NOTES PROMPT -->
    <div id="notesPromptScreen" class="screen hidden">
        <button class="btn btn-secondary back-btn" onclick="goBackToLogin()">‚Üê Back</button>
        <div class="glass-card" style="max-width: 450px;">
            <h1 style="font-size: clamp(2em, 6vw, 3em); margin-bottom: 20px;">üìö Ready to Study?</h1>
            <p style="font-size: 1.4em; margin-bottom: 40px;">Want to paste study notes?</p>
            <div style="display: grid; gap: 20px;">
                <button class="btn btn-success" onclick="goToNotes()">‚úÖ YES - Notes</button>
                <button class="btn btn-primary" onclick="skipToTimer()">üìñ NO - Book Only</button>
            </div>
        </div>
    </div>

    <!-- NOTES SCREEN -->
    <div id="notesScreen" class="screen hidden">
        <button class="btn btn-secondary back-btn" onclick="goBackToNotesPrompt()">‚Üê Back</button>
        <div class="glass-card" style="max-width: 700px;">
            <h1 style="font-size: clamp(2em, 6vw, 3em); margin-bottom: 20px;">üìù Study Notes</h1>
            <div class="input-group">
                <textarea id="studyNotes" rows="10" placeholder="Paste your study notes here... (Ctrl+V to paste)"></textarea>
            </div>
            <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="goToMainApp()">üöÄ START TIMER WITH NOTES</button>
                <button class="btn btn-info" onclick="previewNotes()">üëÅÔ∏è PREVIEW NOTES</button>
            </div>
        </div>
    </div>

    <!-- SETTINGS SCREEN -->
    <div id="settingsScreen" class="screen hidden">
        <button class="btn btn-secondary back-btn" onclick="hideSettings()">‚Üê Back</button>
        <div class="glass-card" style="max-width: 500px;">
            <h1 style="font-size: clamp(2em, 6vw, 3em); margin-bottom: 30px;">‚öôÔ∏è Settings</h1>
            <div style="text-align: left;">
                <div style="margin-bottom: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600;">üîä Warning Volume</label>
                    <input type="range" id="warningVolume" min="0" max="1" step="0.1" value="0.3">
                    <span id="volumeValue" style="font-size: 1.1em;">30%</span>
                </div>
                <div style="margin-bottom: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600;">‚è±Ô∏è Focus Time</label>
                    <select id="focusTime">
                        <option value="15">15 minutes</option>
                        <option value="25" selected>25 minutes</option>
                        <option value="50">50 minutes</option>
                        <option value="90">90 minutes</option>
                    </select>
                </div>
                <div style="margin-bottom: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                    <label style="display: block; margin-bottom: 10px; font-weight: 600;">üí¨ Speech Motivation</label>
                    <label style="display: flex; align-items: center; gap: 15px;">
                        <input type="checkbox" id="speechToggle" checked style="width: 20px; height: 20px;">
                        <span>Enable voice alerts</span>
                    </label>
                </div>
                <button class="btn btn-warning" onclick="resetStats()" style="width: 100%; margin-bottom: 15px;">üóëÔ∏è Reset All Stats</button>
                <button class="btn btn-success" onclick="saveSettings()" style="width: 100%;">üíæ Save Settings</button>
            </div>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="mainApp" class="hidden" style="position: relative;">
        <div class="container">
            <div style="text-align: center; margin-bottom: 30px;">
                <h1 style="font-size: clamp(2em, 5vw, 3.5em); margin-bottom: 15px;">StudyFocus Pro</h1>
                <div style="display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap;">
                    <span id="userWelcome" style="font-size: 1.4em; font-weight: 700; background: rgba(255,255,255,0.2); padding: 12px 24px; border-radius: 25px;"></span>
                    <button class="btn btn-info" onclick="toggleNotesInMain()" style="width: auto; padding: 12px 20px;">üìù Notes</button>
                    <button class="btn btn-warning" onclick="logout()" style="width: auto; padding: 12px 24px;">Logout</button>
                </div>
            </div>

            <!-- NOTES DISPLAY -->
            <div id="notesDisplayMain" class="glass-card hidden">
                <h3 style="margin-bottom: 20px; font-size: 1.5em;">üìñ Your Study Notes</h3>
                <div id="notesContentMain" class="notes-reading">No notes added yet. Paste notes in the notes screen!</div>
                <div style="margin-top: 20px;">
                    <button class="btn btn-secondary" onclick="hideNotesInMain()" style="width: auto; padding: 12px 24px;">‚úñ Hide Notes</button>
                </div>
            </div>

            <!-- STATS -->
            <div class="glass-card">
                <h2 style="text-align: center; margin-bottom: 25px;">üìä Your Progress</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <span id="streakCount" class="streak-flame">üî•</span>
                        <div id="streakText" style="font-size: 1.2em; font-weight: 600; display: block;">Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <span id="sessionCount" style="font-size: 2.5em; font-weight: 800;">0</span>
                        <span>Sessions</span>
                    </div>
                    <div class="stat-card">
                        <span id="totalFocusTime" style="font-size: 2.5em; font-weight: 800;">0m</span>
                        <span>Total Focus</span>
                    </div>
                    <div class="stat-card">
                        <button class="btn btn-success" onclick="showShare()" style="padding: 15px; font-size: 14px;">üì§ Share</button>
                    </div>
                </div>
            </div>

            <!-- TIMER -->
            <div class="glass-card" style="text-align: center;">
                <h2 style="font-size: 1.8em; margin-bottom: 20px;">‚è±Ô∏è FOCUS TIMER</h2>
                <div class="timer-display" id="timerDisplay">25:00</div>
                <svg class="progress-ring" viewBox="0 0 220 220">
                    <circle r="95" cx="110" cy="110" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="12"></circle>
                    <circle id="progressCircle" r="95" cx="110" cy="110" fill="none" stroke="#00f2fe" stroke-width="12" stroke-dasharray="600" stroke-dashoffset="600" stroke-linecap="round"></circle>
                </svg>
                <div style="margin: 30px 0; display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <button class="btn btn-primary" id="startBtn" onclick="startTimerSession()">üöÄ START SESSION</button>
                    <button class="btn btn-warning hidden" id="pauseBtn" onclick="pauseTimer()">‚è∏Ô∏è PAUSE</button>
                    <button class="btn btn-warning hidden" id="skipBtn" onclick="skipBreak()">‚è≠Ô∏è SKIP BREAK</button>
                </div>
                <div id="timerStatus" style="font-size: 1.4em; font-weight: 700; padding: 25px; background: rgba(255,255,255,0.1); border-radius: 15px; margin-top: 20px;">
                    Ready to focus!
                </div>
            </div>
        </div>
    </div>

    <!-- NOTIFICATIONS -->
    <div id="notificationBox" class="notification hidden"></div>
    <div id="speechBubble" class="speech-bubble hidden"></div>

    <script>
        // GLOBAL STATE
        let currentUser = '';
        let focusState = { isActive: false, isBreak: false, timeLeft: 25*60, interval: null, tabLeftTime: 0, warningInterval: null };
        let stats = { streak: 0, sessions: 0, totalTime: 0, lastSessionDate: '' };
        let notesContent = '';
        let settings = { warningVolume: 0.3, focusTime: 25, speechEnabled: true };
        let tabWarningActive = false;
        let notesVisible = false;

        const motivationalQuotes = [
            "üöÄ Focus is your superpower!",
            "üí™ Every second counts!",
            "‚≠ê You're stronger than distractions!",
            "üî• Keep pushing!",
            "üéØ You're building your future!",
            "‚è∞ Stay focused, greatness awaits!",
            "üß† One more minute, you got this!",
            "üí• Crush this session!"
        ];

        // DOM READY
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ StudyFocus Pro FULLY LOADED');
            
            // Settings listeners
            document.getElementById('warningVolume').addEventListener('input', function() {
                document.getElementById('volumeValue').textContent = Math.round(this.value * 100) + '%';
            });
            
            // Tab detection
            document.addEventListener("visibilitychange", handleTabChange);
            window.addEventListener("blur", handleTabChange);
            window.addEventListener("focus", handleTabReturn);
            
            updateTimerDisplay();
        });

        // NOTES FUNCTIONS
        function previewNotes() {
            const notes = document.getElementById('studyNotes').value.trim();
            if (!notes) {
                showNotification('No notes to preview!', 'warning');
                return;
            }
            notesContent = notes;
            showNotification('üìù Notes preview ready! Use START TIMER to continue.', 'success');
        }

        function toggleNotesInMain() {
            if (notesContent) {
                notesVisible = !notesVisible;
                const notesDisplay = document.getElementById('notesDisplayMain');
                const notesContentMain = document.getElementById('notesContentMain');
                
                notesContentMain.textContent = notesContent;
                notesDisplay.classList.toggle('hidden', !notesVisible);
                
                showNotification(notesVisible ? 'üìù Notes shown!' : 'üìù Notes hidden!', 'success');
            } else {
                showNotification('No notes saved! Go to Notes screen first.', 'warning');
            }
        }

        function hideNotesInMain() {
            notesVisible = false;
            document.getElementById('notesDisplayMain').classList.add('hidden');
        }

        function goToMainApp() {
            notesContent = document.getElementById('studyNotes').value.trim();
            document.getElementById('notesScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            if (notesContent) {
                showNotification('‚úÖ Notes saved! Click üìù Notes button to view.', 'success');
                document.getElementById('notesContentMain').textContent = notesContent;
            } else {
                showNotification('üöÄ Timer ready - no notes added.', 'success');
            }
            updateStats();
        }

        // NAVIGATION
        function login() {
            currentUser = document.getElementById('username').value.trim();
            if (!currentUser) return showNotification('Please enter your name!', 'warning');
            
            document.getElementById('userWelcome').textContent = `Welcome, ${currentUser}!`;
            loadSettings();
            loadStats();
            updateStats();
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('notesPromptScreen').classList.remove('hidden');
        }

        function skipToTimer() {
            notesContent = '';
            document.getElementById('notesPromptScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            showNotification('üöÄ Ready to focus!', 'success');
            updateStats();
        }

        function goToNotes() {
            document.getElementById('notesPromptScreen').classList.add('hidden');
            document.getElementById('notesScreen').classList.remove('hidden');
        }

        function goBackToLogin() {
            document.getElementById('notesPromptScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function goBackToNotesPrompt() {
            document.getElementById('notesScreen').classList.add('hidden');
            document.getElementById('notesPromptScreen').classList.remove('hidden');
        }

        function logout() {
            if (focusState.isActive) pauseTimer();
            document.getElementById('mainApp').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('username').value = '';
        }

        // SETTINGS
        function showSettings() {
            if (focusState.isActive) {
                showNotification('Pause timer first!', 'warning');
                return;
            }
            document.querySelectorAll('.screen:not(#settingsScreen), #mainApp').forEach(s => s.classList.add('hidden'));
            document.getElementById('settingsScreen').classList.remove('hidden');
            
            document.getElementById('warningVolume').value = settings.warningVolume;
            document.getElementById('volumeValue').textContent = Math.round(settings.warningVolume * 100) + '%';
            document.getElementById('focusTime').value = settings.focusTime;
            document.getElementById('speechToggle').checked = settings.speechEnabled;
        }

        function saveSettings() {
            settings.warningVolume = parseFloat(document.getElementById('warningVolume').value);
            settings.focusTime = parseInt(document.getElementById('focusTime').value);
            settings.speechEnabled = document.getElementById('speechToggle').checked;
            
            if (currentUser) {
                localStorage.setItem(`studyfocus_settings_${currentUser}`, JSON.stringify(settings));
                localStorage.setItem(`studyfocus_stats_${currentUser}`, JSON.stringify(stats));
            }
            showNotification('‚úÖ Settings saved successfully!', 'success');
            hideSettings();
        }

        function hideSettings() {
            document.getElementById('settingsScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
        }

        function resetStats() {
            if (confirm('Reset all stats? This cannot be undone.')) {
                stats = { streak: 0, sessions: 0, totalTime: 0, lastSessionDate: '' };
                saveStats();
                updateStats();
                showNotification('üìä Stats reset!', 'warning');
            }
        }

        // TIMER FUNCTIONS
        function startTimerSession() {
            if (focusState.isActive) return;
            
            focusState.isActive = true;
            focusState.isBreak = false;
            focusState.timeLeft = settings.focusTime * 60;
            focusState.tabLeftTime = 0;
            
            document.getElementById('startBtn').classList.add('hidden');
            document.getElementById('pauseBtn').classList.remove('hidden');
            
            document.getElementById('timerStatus').innerHTML = 
                `üß† <strong style="color: #00f2fe;">FOCUS MODE (${settings.focusTime}min)</strong><br>` +
                `<span style="color: #ff6b6b;">üö® Switching tabs will PAUSE timer!</span>`;
            
            updateTimerDisplay();
            startTimerLoop();
            showNotification(`‚è∞ ${settings.focusTime}min FOCUS STARTED! Stay on this tab!`, 'success');
            
            if (settings.speechEnabled) {
                speak('Focus session started. Stay focused!');
            }
        }

        function pauseTimer() {
            focusState.isActive = false;
            clearInterval(focusState.interval);
            clearInterval(focusState.warningInterval);
            
            document.getElementById('pauseBtn').classList.add('hidden');
            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('timerStatus').textContent = 'Timer paused. Click START to continue!';
            showNotification('‚è∏Ô∏è Session paused', 'warning');
        }

        function startTimerLoop() {
            focusState.interval = setInterval(() => {
                if (!focusState.isActive) return;
                
                focusState.timeLeft--;
                focusState.tabLeftTime += 1; // Track time spent away
                
                updateTimerDisplay();
                
                if (focusState.timeLeft <= 0) {
                    completeSession();
                    return;
                }
                
                // 1 minute warning
                if (focusState.timeLeft === 60) {
                    showNotification('‚è∞ 1 MINUTE LEFT! Finish strong!', 'warning');
                    if (settings.speechEnabled) speak('One minute remaining!');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(focusState.timeLeft / 60);
            const seconds = focusState.timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            const progress = (settings.focusTime * 60 - focusState.timeLeft) / (settings.focusTime * 60);
            document.getElementById('progressCircle').style.strokeDashoffset = 600 * (1 - progress);
        }

        function completeSession() {
            focusState.isActive = false;
            clearInterval(focusState.interval);
            
            stats.sessions++;
            stats.totalTime += settings.focusTime;
            updateStreak();
            saveStats();
            updateStats();
            
            document.getElementById('startBtn').classList.remove('hidden');
            document.getElementById('pauseBtn').classList.add('hidden');
            document.getElementById('timerStatus').innerHTML = 
                'üéâ <strong style="color: #00f2fe;">SESSION COMPLETE!</strong><br>Great job! Take a short break.';
            
            showNotification('üéâ SESSION COMPLETE! Amazing work!', 'success');
            if (settings.speechEnabled) {
                speak('Session complete! Great job!');
            }
        }

        // TAB DETECTION
        function handleTabChange() {
            if (!focusState.isActive || focusState.isBreak) return;
            
            if (document.hidden || !document.hasFocus()) {
                tabWarningActive = true;
                showNotification('üö® TAB SWITCHED! Timer PAUSED!', 'warning');
                clearInterval(focusState.interval);
                if (settings.speechEnabled) speak('Tab switched! Return to timer!');
            }
        }

        function handleTabReturn() {
            if (tabWarningActive && focusState.isActive) {
                showNotification('‚úÖ Back on track! Timer resumed.', 'success');
                if (settings.speechEnabled) speak('Welcome back! Timer resumed.');
                startTimerLoop();
                tabWarningActive = false;
            }
        }

        // STATS FUNCTIONS
        function loadStats() {
            if (currentUser) {
                const saved = localStorage.getItem(`studyfocus_stats_${currentUser}`);
                if (saved) stats = JSON.parse(saved);
            }
        }

        function saveStats() {
            if (currentUser) {
                localStorage.setItem(`studyfocus_stats_${currentUser}`, JSON.stringify(stats));
            }
        }

        function loadSettings() {
            if (currentUser) {
                const saved = localStorage.getItem(`studyfocus_settings_${currentUser}`);
                if (saved) settings = JSON.parse(saved);
            }
        }

        function updateStreak() {
            const today = new Date().toDateString();
            if (stats.lastSessionDate !== today) {
                stats.streak = 1;
                stats.lastSessionDate = today;
            } else {
                stats.streak++;
            }
        }

        function updateStats() {
            document.getElementById('streakCount').textContent = 'üî•'.repeat(Math.min(stats.streak, 5));
            document.getElementById('streakText').textContent = stats.streak > 1 ? `${stats.streak} Day Streak` : 'Day Streak';
            document.getElementById('sessionCount').textContent = stats.sessions;
            document.getElementById('totalFocusTime').textContent = `${Math.floor(stats.totalTime / 60)}h ${stats.totalTime % 60}m`;
        }

        function showShare() {
            const shareText = `StudyFocus Pro: ${stats.sessions} sessions, ${Math.floor(stats.totalTime/60)}h ${stats.totalTime%60}m total focus, ${stats.streak} day streak! üöÄ #StudyFocusPro`;
            navigator.clipboard.writeText(shareText).then(() => {
                showNotification('üì§ Stats copied to clipboard!', 'success');
            });
        }

        // UTILITY FUNCTIONS
        function toggleTheme() { 
            document.body.classList.toggle('dark-theme'); 
        }

        function showNotification(msg, type = 'warning') {
            const notif = document.getElementById('notificationBox');
            notif.textContent = msg;
            notif.classList.remove('hidden');
            setTimeout(() => notif.classList.add('hidden'), 4000);
        }

        function speak(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.volume = settings.warningVolume;
                utterance.rate = 1.2;
                speechSynthesis.speak(utterance);
            }
        }

        // Skip break function (placeholder)
        function skipBreak() {
            showNotification('No break active!', 'warning');
        }
    </script>
</body>
</html>
